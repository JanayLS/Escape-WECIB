<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini-Quest Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }

    #game-container {
      width: 80%;
      margin: 50px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    #dialogue-box {
      margin-bottom: 20px;
      padding: 15px;
      background-color: #e0e0e0;
      border-radius: 5px;
      font-size: 16px;
    }

    #actions {
      margin-top: 20px;
    }

    .button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .button:hover {
      background-color: #0056b3;
    }

    #avatar-selection {
      text-align: center;
    }

    .avatar-option {
      display: inline-block;
      margin: 10px;
      cursor: pointer;
    }

    .avatar-option img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 2px solid #ccc;
      transition: transform 0.3s;
    }

    .avatar-option img:hover {
      transform: scale(1.1);
    }

    .character {
      width: 100px;
      height: 100px;
      display: inline-block;
      margin: 20px;
      cursor: pointer;
    }

    #room-image {
      max-width: 100%;
      height: auto;
      margin-top: 20px;
    }

    .gem {
      width: 30px;
      height: 30px;
      background-color: gold;
      border-radius: 50%;
      display: inline-block;
      margin: 10px;
      cursor: pointer;
    }

  </style>
</head>
<body>
  <div id="game-container">
    <!-- Avatar Selection Screen -->
    <div id="avatar-selection">
      <h2>Select Your Avatar</h2>
      <div class="avatar-option" onclick="selectAvatar('avatar1')">
        <img src="guy.png" alt="Avatar 1">
      </div>
      <div class="avatar-option" onclick="selectAvatar('avatar2')">
        <img src="witch.png" alt="Avatar 2">
      </div>
      <div class="avatar-option" onclick="selectAvatar('avatar3')">
        <img src="pony.png" alt="Avatar 3">
      </div>
    </div>

    <!-- Game Screen (hidden initially) -->
    <div id="game-screen" style="display: none;">
      <div id="dialogue-box">Welcome to Ms. Moose's Room! Solve the scheduling issues to proceed. Good luck!</div>
      <img id="room-image" src="room-removebg-preview.png" alt="Room Image">
      <div id="characters"></div>
      <div id="actions">
        <button class="button" onclick="startQuest(1)">Start Quest 1</button>
        <button class="button" onclick="startQuest(2)">Start Quest 2</button>
        <button class="button" onclick="startQuest(3)">Start Quest 3</button>
        <button class="button" onclick="startQuest(4)">Start Quest 4</button>
      </div>
    </div>
  </div>

  <script>
    let currentQuest = 0;
    let gemsCollected = 0;
    let playerAvatar = null;

    const characters = {
      helper: {
        name: "Ms. Moore",
        image: "msmoore.png",
        dialogue: [
          "Hey! What do you need from me today?",
          "You found the key! Good job!"
        ]
      },
      sage: {
        name: "Ms. Moore",
        image: "msmoore.png",
        dialogue: [
          "I have a riddle for you: What has keys but cannot open locks?",
          "Correct! The answer is 'Piano'. You’ve solved my riddle!"
        ]
      },
      ghost: {
        name: "Ms. Moore",
        image: "msmoore.png",
        dialogue: [
          "I am trapped here. Can you help me by choosing the right answer?",
          "Thank you for setting me free! I am at peace now."
        ]
      },
      merchant: {
        name: "Ms. Moore",
        image: "msmoore.png",
        dialogue: [
          "I’ve lost some gems around the room. Can you find them for me?",
          "Great job! You've found all the gems! Thank you."
        ]
      }
    };

    function updateDialogue(text) {
      document.getElementById('dialogue-box').innerText = text;
    }

    function selectAvatar(avatarId) {
      playerAvatar = avatarId;
      document.getElementById('avatar-selection').style.display = 'none';
      document.getElementById('game-screen').style.display = 'block';
      displayPlayerAvatar(avatarId);
    }

    function displayPlayerAvatar(avatarId) {
      let avatarImage = '';
      switch (avatarId) {
        case 'avatar1':
          avatarImage = "guy.png";
          break;
        case 'avatar2':
          avatarImage = "witch.png";
          break;
        case 'avatar3':
          avatarImage = "pony.png";
          break;
        default:
          avatarImage = "https://via.placeholder.com/100?text=Unknown";
      }
      document.getElementById('characters').innerHTML = `
        <img src="${avatarImage}" class="character" alt="Player Avatar">
      `;
    }

    function startQuest(questNumber) {
      currentQuest = questNumber;
      switch (questNumber) {
        case 1:
          updateDialogue(`${characters.helper.name}: "${characters.helper.dialogue[0]}"`);
          displayCharacterImage(characters.helper.image);
          document.getElementById('actions').innerHTML = `
            <button class="button" onclick="findKey()">Search for the Key</button>
          `;
          break;
        case 2:
          updateDialogue(`${characters.sage.name}: "${characters.sage.dialogue[0]}"`);
          displayCharacterImage(characters.sage.image);
          document.getElementById('actions').innerHTML = `
            <input type="text" id="riddle-answer" placeholder="Your answer">
            <button class="button" onclick="submitRiddle()">Submit Answer</button>
          `;
          break;
        case 3:
          updateDialogue(`${characters.ghost.name}: "${characters.ghost.dialogue[0]}"`);
          displayCharacterImage(characters.ghost.image);
          document.getElementById('actions').innerHTML = `
            <button class="button" onclick="talkToGhost()">Talk to the Ghost</button>
          `;
          break;
        case 4:
          updateDialogue(`${characters.merchant.name}: "${characters.merchant.dialogue[0]}"`);
          displayCharacterImage(characters.merchant.image);
          document.getElementById('actions').innerHTML = `
            <div id="gems-container">
              <div class="gem" onclick="collectGem()"></div>
              <div class="gem" onclick="collectGem()"></div>
              <div class="gem" onclick="collectGem()"></div>
            </div>
            <button class="button" onclick="checkGems()">Check Gems Collected</button>
          `;
          break;
        default:
          updateDialogue("Invalid quest.");
          break;
      }
    }

    function displayCharacterImage(imageUrl) {
      document.getElementById('characters').innerHTML = `
        <img src="${imageUrl}" class="character" alt="Character Image">
      `;
    }

    // Quest 1: Find the Hidden Key
    function findKey() {
      updateDialogue(`${characters.helper.name}: "${characters.helper.dialogue[1]}"`);
      resetGame();
    }

    // Quest 2: Solve the Riddle
    function submitRiddle() {
      const answer = document.getElementById('riddle-answer').value.toLowerCase();
      if (answer === 'piano') {
        updateDialogue(`${characters.sage.name}: "${characters.sage.dialogue[1]}"`);
        resetGame();
      } else {
        updateDialogue(`${characters.sage.name}: 'Oops, that’s not it. Try again!'`);
      }
    }

    // Quest 3: Talk to the Ghost
    function talkToGhost() {
      updateDialogue(`${characters.ghost.name}: "${characters.ghost.dialogue[1]}"`);
      resetGame();
    }

    // Quest 4: Collect Gems
    function collectGem() {
      gemsCollected++;
      updateDialogue(`You have collected ${gemsCollected} gem(s).`);
    }

    function checkGems() {
      if (gemsCollected >= 3) {
        updateDialogue(`${characters.merchant.name}: "${characters.merchant.dialogue[1]}"`);
        resetGame();
      } else {
        updateDialogue(`${characters.merchant.name}: 'You still need more gems. Keep looking!'`);
      }
    }

    // Reset after quest completion
    function resetGame() {
      currentQuest = 0;
      gemsCollected = 0;
      document.getElementById('actions').innerHTML = `
        <button class="button" onclick="startQuest(1)">Start Quest 1</button>
        <button class="button" onclick="startQuest(2)">Start Quest 2</button>
        <button class="button" onclick="startQuest(3)">Start Quest 3</button>
        <button class="button" onclick="startQuest(4)">Start Quest 4</button>
      `;
      document.getElementById('dialogue-box').innerText = "Great job! You've completed a quest. Choose another one to start.";
    }
  </script>
</body>
</html>
